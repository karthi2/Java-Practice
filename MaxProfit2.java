
public class MaxProfit2 {
    private static int calcProfit (int[] a, int buy, int start, int profit) {
        if (start >= a.length) {
            return 0;
        }
        
        int i = 0;
        
        for (i = start; i < a.length; i++) {
            if (a[i] <= buy) {
                buy = a[i];
            } else {
                break;
            }
        }
        
        if (i < a.length) {
        		profit = a[i] - buy;
        }
        
        if ((i + 2) < a.length) {
            profit += calcProfit(a, a[i+2], i+3, 0);
        }
        
        if ((i+1) < a.length) {
            return Math.max(profit, calcProfit(a, buy, i+1, 0));
        } else {
            return profit;
        }
    }
    
    public static int maxProfit(int[] a) {
        if (a.length == 0) {
            return 0;
        }
        
        
        return calcProfit(a, a[0], 1, 0);
    }
    
	public static void main (String[] args) {
		int[] a = {70,4,83,56,94,72,78,43,2,86,65,100,94,56,41,66,3,33,10,3,45,94,15,12,78,60,58,0,58,15,21,7,11,41,12,96,83,77,47,62,27,19,40,63,30,4,77,52,17,57,21,66,63,29,51,40,37,6,44,42,92,16,64,33,31,51,36,0,29,95,92,35,66,91,19,21,100,95,40,61,15,83,31,55,59,84,21,99,45,64,90,25,40,6,41,5,25,52,59,61,51,37,92,90,20,20,96,66,79,28,83,60,91,30,52,55,1,99,8,68,14,84,59,5,34,93,25,10,93,21,35,66,88,20,97,25,63,80,20,86,33,53,43,86,53,55,61,77,9,2,56,78,43,19,68,69,49,1,6,5,82,46,24,33,85,24,56,51,45,100,94,26,15,33,35,59,25,65,32,26,93,73,0,40,92,56,76,18,2,45,64,66,64,39,77,1,55,90,10,27,85,40,95,78,39,40,62,30,12,57,84,95,86,57,41,52,77,17,9,15,33,17,68,63,59,40,5,63,30,86,57,5,55,47,0,92,95,100,25,79,84,93,83,93,18,20,32,63,65,56,68,7,31,100,88,93,11,43,20,13,54,34,29,90,50,24,13,44,89,57,65,95,58,32,67,38,2,41,4,63,56,88,39,57,10,1,97,98,25,45,96,35,22,0,37,74,98,14,37,77,54,40,17,9,28,83,13,92,3,8,60,52,64,8,87,77,96,70,61,3,96,83,56,5,99,81,94,3,38,91,55,83,15,30,39,54,79,55,86,85,32,27,20,74,91,99,100,46,69,77,34,97,0,50};
		System.out.println(maxProfit(a));
	}
}
